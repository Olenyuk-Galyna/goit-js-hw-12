{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45519676-8baf865f5b6a7e52cd4b281c8';\n\nexport async function getPhotoService(userQuery, page) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: userQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: 15,\n  });\n\n  const { data } = await axios(`https://pixabay.com/api/?${params}`);\n  return data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('#gallery');\n\nexport function renderImages(images) {\n  const markup = images\n    .map(image => {\n      return `\n     <li class=\"image-card\">\n            <a href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" class=\"card-img\" alt=\"${image.tags}\" /></a>\n        <ul class=\"description\">\n        <li><p>likes:</p><p>${image.likes}</p></li>\n        <li><p>views:</p><p>${image.views}</p></li>\n        <li><p>comments:</p><p>${image.comments}</p></li>\n        <li><p>downloads:</p><p>${image.downloads}</p></li>\n        </ul>\n        </li>\n    `;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\nconst lightbox = new SimpleLightbox('.image-card a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getPhotoService } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\nconst form = document.querySelector('.serch-form');\nconst gallery = document.querySelector('#gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nform.addEventListener('submit', getPhoto);\nloadMoreBtn.addEventListener('click', onLoadMore);\nlet trimedValue = '';\nlet currentPage = 1;\n\nasync function getPhoto(evt) {\n  evt.preventDefault();\n  const { serchInput } = evt.currentTarget.elements;\n  trimedValue = serchInput.value.trim();\n  gallery.innerHTML = '';\n  currentPage = 1;\n  if (trimedValue === '') {\n    return iziToast.error({\n      position: 'topRight',\n      message: 'Please fill in the fields',\n    });\n  }\n\n  loader.classList.remove('hiden');\n  try {\n    const data = await getPhotoService(trimedValue, currentPage);\n    if (data.hits.length === 0) {\n      loadMoreBtn.classList.add('hiden');\n      return iziToast.warning({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    renderImages(data.hits);\n    smoothScroll();\n    form.reset();\n    if (data.totalHits > 15) {\n      loadMoreBtn.classList.remove('hiden');\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: error.message,\n    });\n  } finally {\n    loader.classList.add('hiden');\n  }\n}\n\nasync function onLoadMore() {\n  loader.classList.remove('hiden');\n  currentPage += 1;\n  try {\n    const data = await getPhotoService(trimedValue, currentPage);\n    renderImages(data.hits);\n    smoothScroll();\n    if (Math.ceil(data.totalHits / 15) === currentPage) {\n      loadMoreBtn.classList.add('hiden');\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: error.message,\n    });\n  } finally {\n    loader.classList.add('hiden');\n  }\n}\nfunction smoothScroll() {\n  const { height } = gallery.lastElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","getPhotoService","userQuery","page","params","data","axios","gallery","renderImages","images","markup","image","lightbox","SimpleLightbox","form","loader","loadMoreBtn","getPhoto","onLoadMore","trimedValue","currentPage","evt","serchInput","iziToast","smoothScroll","error","height"],"mappings":"+vBAEA,MAAMA,EAAU,qCAET,eAAeC,EAAgBC,EAAWC,EAAM,CACrD,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACd,CAAG,EAEK,CAAE,KAAAE,CAAI,EAAK,MAAMC,EAAM,4BAA4BF,CAAM,EAAE,EACjE,OAAOC,CACT,CCdA,MAAME,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAASD,EACZ,IAAIE,GACI;AAAA;AAAA,uBAEUA,EAAM,aAAa,eAAeA,EAAM,YAAY,2BAA2BA,EAAM,IAAI;AAAA;AAAA,8BAElFA,EAAM,KAAK;AAAA,8BACXA,EAAM,KAAK;AAAA,iCACRA,EAAM,QAAQ;AAAA,kCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAI5C,EACA,KAAK,EAAE,EAEVJ,EAAQ,mBAAmB,YAAaG,CAAM,EAC9CE,EAAS,QAAO,CAClB,CACA,MAAMA,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GAChB,CAAC,ECvBKC,EAAO,SAAS,cAAc,aAAa,EAC3CP,EAAU,SAAS,cAAc,UAAU,EAC3CQ,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvDF,EAAK,iBAAiB,SAAUG,CAAQ,EACxCD,EAAY,iBAAiB,QAASE,CAAU,EAChD,IAAIC,EAAc,GACdC,EAAc,EAElB,eAAeH,EAASI,EAAK,CAC3BA,EAAI,eAAc,EAClB,KAAM,CAAE,WAAAC,CAAY,EAAGD,EAAI,cAAc,SAIzC,GAHAF,EAAcG,EAAW,MAAM,OAC/Bf,EAAQ,UAAY,GACpBa,EAAc,EACVD,IAAgB,GAClB,OAAOI,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,2BACf,CAAK,EAGHR,EAAO,UAAU,OAAO,OAAO,EAC/B,GAAI,CACF,MAAMV,EAAO,MAAMJ,EAAgBkB,EAAaC,CAAW,EAC3D,GAAIf,EAAK,KAAK,SAAW,EACvB,OAAAW,EAAY,UAAU,IAAI,OAAO,EAC1BO,EAAS,QAAQ,CACtB,SAAU,WACV,QACE,0EACV,CAAO,EAEHf,EAAaH,EAAK,IAAI,EACtBmB,IACAV,EAAK,MAAK,EACNT,EAAK,UAAY,IACnBW,EAAY,UAAU,OAAO,OAAO,CAEvC,OAAQS,EAAO,CACdF,EAAS,MAAM,CACb,SAAU,WACV,QAASE,EAAM,OACrB,CAAK,CACL,QAAY,CACRV,EAAO,UAAU,IAAI,OAAO,CAC7B,CACH,CAEA,eAAeG,GAAa,CAC1BH,EAAO,UAAU,OAAO,OAAO,EAC/BK,GAAe,EACf,GAAI,CACF,MAAMf,EAAO,MAAMJ,EAAgBkB,EAAaC,CAAW,EAC3DZ,EAAaH,EAAK,IAAI,EACtBmB,IACI,KAAK,KAAKnB,EAAK,UAAY,EAAE,IAAMe,IACrCJ,EAAY,UAAU,IAAI,OAAO,EACjCO,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACjB,CAAO,EAEJ,OAAQE,EAAO,CACdF,EAAS,MAAM,CACb,SAAU,WACV,QAASE,EAAM,OACrB,CAAK,CACL,QAAY,CACRV,EAAO,UAAU,IAAI,OAAO,CAC7B,CACH,CACA,SAASS,GAAe,CACtB,KAAM,CAAE,OAAAE,CAAQ,EAAGnB,EAAQ,iBAAiB,sBAAqB,EACjE,OAAO,SAAS,CACd,IAAKmB,EAAS,EACd,SAAU,QACd,CAAG,CACH"}